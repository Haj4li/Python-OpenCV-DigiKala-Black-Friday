# Python OpenCV DigiKala Black Friday

A python tool for grab digikala's (fake) 100% discount codes

English:

This is a python script written to scrap thousands of images from digikala pages and find some discount codes by visually identifying them using OpenCV.

فارسی:

سلام !
این پروژه رو من سال 2021 زدم و خب زمانی بود که دیجیکالا ایونت جمعه سیاه (ایرانیا باید از همه چی اسکی برن ) رو برگزار کرد و خب با یه سوپرایز بزرگ هم برگزار کرد 🎇 کد تخفیف 100 درصدی برای خرید 🎇 کی از پلی استیشن رایگان یا آیفون رایگان بدش میاد ؟

ولی این یه مسابقه بود، کاربر ها باید توی زمان مشخصی یک کد تخفیف که توی تصاویر کالا های موجود در یک لیست قایم شدن رو پیدا میکردن و سریع ازش استفاده میکردن.
زمانی که من این موضوع رو فهمیدم یکی از کد ها پیدا شده بود و 3-4 تای دیگه باقی مونده بود، من میدونستم گشتن بین 50-60 هزار یا بیشتر عکس دیوونگیه و نمیشه سر تایم پیداش کرد.
نمونه عکس هایی که کد تخفیف توش جاساز شده بود :

![Fake digikala](https://github.com/Haj4li/Python-OpenCV-DigiKala-Black-Friday/blob/main/pic1.jpg)
![Fake digikala](https://github.com/Haj4li/Python-OpenCV-DigiKala-Black-Friday/blob/main/pic2.jpg)

پس یه اسکریپت کوچولو پایتون نوشتم که صفحات مختلف دیجی کالا رو شخم میزد و با کتابخونه بینایی ماشین پایتون دنبال کد تخفیف میگشت.

ولی خب فکر میکنم بتونید حدس بزنید چیشد (دیجیکالا دستش رو شده واسه همه )، خلاصه این شد که اسکریپت من سی یا چهل هزار عکس رو یکی یکی بررسی کرد و بالاخره یک عکس که کد تخفیف داخلش بود رو پیدا کرد، زمان صرف شده حدودا چهل دقیقه بود!

تصویری که کد من باید اون رو داخل عکس محصولات پیدا میکرد به این شکل هست :

![Fake digikala](https://github.com/Haj4li/Python-OpenCV-DigiKala-Black-Friday/blob/main/blk.jpg)

اما روی کد تخفیف مهر "شکار شد" بود :/ چطور ممکنه یک انسان معمولی توی چهل دقیقه کد رو پیدا کنه؟
فورا زنگ زدم به پشتیبانی دیجی کالا ساعت یازده شب احتمالا مکالمه رو هم بتونید حدس بزنید ولی خب بازم میگم:

A سلام خسته نباشید

D سلام خیلی ممنون بفرمایید

A من کد تخفیف جمعه سیاه رو پیدا کردم، ولی نوشته شکار شده

D خب شاید یکی زودتر از شما پیدا کرده

A چطور ممکنه یکی توی 40 دقیقه چند هزار محصول با چندین هزار عکس رو بگرده و پیدا کنه ؟

D حتما شده دیگه آقا شبتون بخیر خدانگهدار (قطع کرد )

شاید با خودتون بگید حتما شده دیگه چرا اینقد حساسیت به خرج میدی، باید بگم که توی صفحه نتایج شکار های کد تخفیف
این کد تخفیف تا 12 ساعت بعدش توی حالت باز (شکار نشده) بود و دیجی کالا منتظر بود مردم محصولات بیشتری ببینند

بعد 12 ساعت کد تخفیف به حالت شکار شده در اومد و من با احتمال اینکه " حتما شده دیگه اقا " کد رو دوباره اجرا کردم و این بار توی 30 دقیقه پیدا شد .

و حدس بزنید چیشد ؟ کد شکار شده بود و بازم تا 15-16 ساعت کد رو آزاد نشون می دادند.

و این بود ایونت رویایی دیجی کالا دیگه قضاوت با خودتون
